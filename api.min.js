function api_onload(){function B(f){if("AnyBalanceApiError"==f.name)f={error:!0,message:f.message};else if("AnyBalanceApiUserError"==f.name)f.error=!0,f.name=H;else{var g;if("object"==typeof f){g="Unhandled exception in user script:"+("\nname: "+f.name+"\nmessage: "+f.message);for(var h in f)/^(name|message|stack)$/.test(h)||(g+="\n"+h+": "+f[h]);f.stack&&(g+="\nCall stack:\n"+f.stack)}else g=""+f;f={error:!0,message:g,investigate:!0,unhandled:!0}}return f}function C(){D||E||F({error:!0,message:"main() exited without calling setResult()"})}
var h=g_AnyBalanceApiParams,q=h.preferences,E=h.async,P,D,g,H,p=AnyBalance=function(){function f(a,b){b||(b=[]);var c=ja(h.signature+l({method:a,params:b}));if(c&&"string"==typeof c){if("{"==c.charAt(0))return c=x(c),c.result;throw new k(c);}throw new k("Api returned nothing!");}function p(){return e?e.getLastError():f("getLastError")}function w(a,b){return Q&&R?R(a,b):e?e.trace(a,b):f("trace",[a,b])}function v(a){var b={},c=S,d;for(d in a)T(a[d])?b[c[d]||d]=v(a[d]):b[c[d]||d]=a[d];return b}function C(a){a=
v(a);return e?e.setOptions(l(a)):f("setOptions",[l(a)])}function E(a,b){return e?e.addEventListener(a,b):f("addEventListener",[a,b])}function k(a){return{name:"AnyBalanceApiError",message:a||J(p())}}function K(a,b,c){b=T(b)?b:{allow_retry:b||H,fatal:c||H};b.name="AnyBalanceApiUserError";b.message=a;return b}function J(a){return"object"==typeof a?""+a:a}function U(){if(!g){g={arr:[],obj:{}};var a=q.ab$counters,b,c;if(a)for(b=0;b<a.length;++b)(c=a[b])&&!g.obj[c]&&(g.arr.push(c),g.obj[c]=!0);else for(b=
0;20>b;++b)(c=q["counter"+b])&&!g.obj[c]&&(g.arr.push(c),g.obj[c]=!0)}}function L(a){return"[object Array]"===Object.prototype.toString.call(a)}function T(a){return a&&"object"==typeof a&&!L(a)}function V(a){U();for(var b=0;b<arguments.length;++b){var c=arguments[b];if(L(c)?V.apply(this,c):ka(c))return!0}return!1}function ka(a){var b=g.obj,c=/\.[^.]*$/,d;if(b["--auto--"]||0==g.arr.length)return!0;do{if(b[a]||b[a+"+"])return!0;if(b[a+"-"])return!1;d=c.test(a);a=a.replace(c,"")}while(d);return b["+"]?
!0:!1}function M(){var a;a=e?e.getCookies():f("getCookies");if(y&&!a)throw new k;return a?x(a):null}function W(a,b,c,d){if(d){if("object"!=typeof d)throw new k("setCookie: params can be null, undefined, empty string or an object only!");d=l(d)}else d="";"undefined"==typeof c&&(c=null);a=e?e.setCookie(a,b,c,d):f("setCookie",[a,b,c,d]);return m(a)}function X(){var a;a=e?e.getLastResponseParameters():f("getLastResponseParameters");if(y&&!a)throw new k;return a?x(a):null}function Y(){if(null===n){var a;
a=e?e.loadData():f("loadData");n=(a=z(a))?x(a):{}}}function Z(a,b){Y();return"undefined"==typeof n[a]?b:n[a]}function aa(a,b){Y();n[a]!=b&&(A=!0,n[a]=b)}function I(){!1===r&&((r=X())||(ba=p()));if(!r&&y)throw new K(ba);return r}function ca(){var a=I();return a?a.headers:[]}function m(a){if(y&&!0!==a)throw new k;return a}function z(a){if(y&&null==a)throw new k;return J(a)}function da(a,b){var c=[];if(t[a])c=t[a];else{t[a]=c;var d=E(a,!0);m(d)}c.push(b);return!0}function ea(a,b){if(!t[a])return!1;var c=
t[a],d=b?c.indexOf(b):0;~d&&c.splice(d,1);c.length||(c=E(a,!1),m(c),delete t[a]);return 0<=d}function fa(a,b){try{for(var c=t[a],d=0;c&&d<c.length;++d)c[d](b)}catch(e){F(B(e))}}function ga(a){if(a&&(a=v(a),a.callback)){var b="#"+ ++la;da(b,a.callback);a.callback=b}return a}function u(a,b,c){c=c?l(c):"";a=a||"";b=e?e.callPreferenceMethod(a,b,c):f("callPreferenceMethod",[a,b,c]);(b=z(b))&&(b=x(b));return b&&b.value}function ha(a){a=u(a,"getSubPreferences");for(var b=[],c=0;c<a&&a.length;++c)b.push(new G(a[c]));
return b}function N(a,b,c){/^(parent|preference)$/.test(c)&&(a[b]=new G(a[b]))}function G(a){function b(a,b){do{if(0<=O[a].properties.indexOf(b))return!0;a=O[a].parent}while(a);throw new k("Preference "+a+" does not have property "+b);}function c(a,c){if(!O[a])throw new k("Wrong preference type: "+a);var d=!1;if("string"==typeof c)return b(a,c);if(L(c))for(var e=0;e<c.length;++e)d=b(a,c[e].name)||d;else{for(e in c)d=b(a,e)||d;return d}}var d=a.split("#"),g=d[0],h=d[1];c(g);if(null===h)throw new k("No key in preference typekey: "+
a);this.set=function(a,b){c(g,a);var d;"string"==typeof a?d=l({value:b}):(d="",a=l(a));var k;k=a;k=e?e.setPreferenceProperty(h,k,d):f("setPreferenceProperty",[h,k,d]);return m(k)};this.get=function(a){c(g,a);var b;b=e?e.getPreferenceProperty(h,a):f("getPreferenceProperty",[h,a]);if(b=z(b)){b=x(b);if("string"!=typeof a){for(var d in b)N(b,d,d);return b}N(b,"value",a);return b.value}return null};this.add=function(a){(a=u(h,"addPreference",a))&&(a=new G(a));return a};this.remove=function(){return u(h,
"removePreference",void 0)};this.getSubPreferences=function(){return ha(h)};this.getType=function(){return g};this.getKey=function(){return h}}var y=!0,e=h.api,l=JSON.stringify,x=JSON.parse,Q=h.debugmode,ja=h.prompt_placeholder||this.prompt,R=h.trace_placeholder,ia=h.setResult_placeholder,n=null,A,r=!1,ba,t={},la=0,O={Preference:{properties:"key title summary summaryPlain enabled dependency order defaultValue visible parent preference".split(" ")},DialogPreference:{properties:["dialogTitle","dialogMessage",
"positiveButtonText","negativeButtonText"],parent:"Preference"},EditTextPreference:{properties:["inputType","text"],parent:"DialogPreference"},ListPreference:{properties:["entries","value"],parent:"DialogPreference"},CheckBoxPreference:{properties:["summaryOff","summaryOn","disableDependentsState","checked"],parent:"Preference"},PreferenceGroup:{properties:["preferences"],parent:"Preference"},PreferenceCategory:{properties:[],parent:"PreferenceGroup"},PreferenceScreen:{properties:[],parent:"PreferenceGroup"}},
S={DEFAULT_CHARSET:"defaultCharset",FORCE_CHARSET:"forceCharset",REQUEST_CHARSET:"requestCharset",SSL_ENABLED_PROTOCOLS:"sslEnabledProtocols",SSL_ENABLED_PROTOCOLS_ADD:"sslEnabledProtocolsAdd",SSL_ENABLED_PROTOCOLS_REMOVE:"sslEnabledProtocolsRemove",SSL_ENABLED_CIPHER_SUITES:"sslEnabledCipherSuites",SSL_ENABLED_CIPHER_SUITES_ADD:"sslEnabledCipherSuitesAdd",SSL_ENABLED_CIPHER_SUITES_REMOVE:"sslEnabledCipherSuitesRemove",PER_DOMAIN:"perDomain",HTTP_METHOD:"httpMethod"};return{getLevel:function(){return e?
e.getLevel():f("getLevel")},getLastError:function(){return J(p())},trace:function(a,b){w(""+a,b||"trace")},setExceptions:function(a){y=a},requestGet:function(a,b,c){b=b?l(b):"";c=(c=ga(c))?l(c):"";r=!1;a=e?e.requestGet(a,b,c):f("requestGet",[a,b,c]);return z(a)},requestPost:function(a,b,c,d){var g="object"===typeof b;g&&(b=l(b));c=c?l(c):"";d=(d=ga(d))?l(d):"";r=!1;b=b||"";a=e?e.requestPost(a,b,g,c,d):f("requestPost",[a,b,g,c,d]);return z(a)},setAuthentication:function(a,b,c){if(c){if("object"!=typeof c)throw new k("setAuthentication: authscope can be null, undefined, empty string or an object only!");
c=l(c)}else c="";a=e?e.setAuthentication(a,b,c):f("setAuthentication",[a,b,c]);return m(a)},setCookie:W,getCookies:M,getLastResponseParameters:X,getLastUrl:function(){var a=I();return a?a.url:""},getLastStatusString:function(){var a=I();return a?a.status:""},getLastStatusCode:function(){var a=I();return a?(a=a.status.match(/\S+\s+(\d+)/))?parseInt(a[1]):0:0},getLastResponseHeaders:ca,getLastResponseHeader:function(a){for(var b=ca(),c=0;c<b.length;++c){var d=b[c];if(d[0]==a)return d[1]}return!1},getCookie:function(a,
b){if(b&&"object"!=typeof b)throw new K("getCookie: params argument should be null or object!");for(var c=b&&b.path,d=b&&b.domain,e=b&&b.allcookies||M(),f=0;f<e.length;++f){var g=e[f];if(g.name==a&&(!d||g.domain&&0==d.toLowerCase().indexOf(g.domain))&&(!c||g.path&&0==c.indexOf(g.path)))return g.value}return null},retrieveCode:function(a,b,c){c=c?l(c):"";b=b||"";a=e?e.retrieveCode(a,b,c):f("retrieveCode",[a,b,c]);return z(a)},clearAuthentication:function(){var a;a=e?e.clearAuthentication():f("clearAuthentication");
return m(a)},onInitialLoad:function(){var a;a=h.nAccountID;a=e?e.onInitialLoad(a):f("onInitialLoad",[a]);return m(a)},isSetResultCalled:function(){return D},setResult:function(a){A&&w("WARNING: setResult is called without saving data!","setResult");if(D)return!0;D=!0;if("function"==typeof converter_main)try{a=converter_main(a)}catch(c){a=B(c)}var b;b=h.nAccountID;a=l(a);b=Q&&ia?ia(b,a):e?e.setResult(b,a):f("setResult",[b,a]);m(b);return b},OPTIONS:S,setOptions:function(a){a=C(a);return m(a)},sleep:function(a){if("number"!=
typeof a)throw new k("AnyBalance.sleep() accepts only integer argument in milliseconds!");a=e?e.sleep(a):f("sleep",[a]);return m(a)},Error:K,getAvailableCounters:function(){U();return g.arr},isAvailable:V,getPreferences:function(){return q?q:u("","getPreferences")},setDefaultCharset:function(a){a=C({DEFAULT_CHARSET:a});return m(a)},getTopPreferences:function(){return ha("")},getPreference:function(a){return(a=u(a,"getPreference"))?new G(a):null},setPreferenceProperties:function(a){return u(null,"setPreferenceProperties",
a)},getPreferenceProperties:function(a){a=u(null,"getPreferenceProperties",a);for(var b in a){var c=a[b],d=void 0;for(d in c)N(c,d,d)}return a},addCallback:da,removeCallback:ea,fireCallback:fa,fireRequestCallback:function(a,b){try{r=!1,e?e.restoreRequestParams(a):f("restoreRequestParams",[a]),fa(a,b)}catch(c){F(B(c))}finally{ea(a)}},Preference:G,getData:Z,setData:aa,clearData:function(){n={};A=!0},saveData:function(a){n&&(A||a)&&(a=l(n),a=e?e.saveData(a):f("saveData",[a]),m(a));A=!1},saveCookies:function(){A=
!0;aa("!@#AB_COOKIES",M())},restoreCookies:function(){for(var a=Z("!@#AB_COOKIES",[]),b=0;b<a.length;++b){var c=a[b];W(c.domain,c.name,c.value,c)}},getCapabilities:function(){return e?e.getCapabilities():f("getCapabilities")},setLoginSuccessful:function(){P=!0}}}(),F=p.setResult,v;try{if(p.onInitialLoad())if("function"==typeof converter_init&&converter_init(),(v=q.ab$countersSet)&&!E)for(var w=0;w<v.length;++w){q.ab$countersSetIndex=w;q.ab$counters=v[w];g=D=H;try{main()}catch(f){F(B(f));if(f.fatal){p.trace("Caught fatal error, breaking iterations");
break}if(!P){p.trace("Login was not successful, breaking iterations");break}}C()}else main()}catch(f){F(B(f))}finally{C()}};